##### PREFIX #####
set -g prefix ^A
unbind C-b
bind C-a send-prefix

##### GENERAL OPTIONS #####
set -g base-index 1              # windows start at 1
setw -g pane-base-index 1        # panes start at 1
set -g detach-on-destroy off     # don't kill session if last window closes
set -g escape-time 0             # faster key handling
set -g history-limit 100000      # big scrollback, but not insane
set -g renumber-windows on       # renumber when one is closed
set -g set-clipboard on          # system clipboard (if supported)
set -g status-position top       # mac-style status bar on top
set -g pane-active-border-style 'fg=magenta,bg=default'
set -g pane-border-style 'fg=brightblack,bg=default'

# Truecolor support (if your TERM supports it)
set -g default-terminal "tmux-256color"
set -ga terminal-overrides ",xterm-256color:RGB,tmux-256color:RGB"

# Use vi-style keys in copy mode
setw -g mode-keys vi
set -g mouse on

##### RELOAD CONFIG #####
# Reload tmux config with Prefix + r
bind r source-file ~/.config/tmux/tmux.conf \; display-message "Reloaded tmux.conf"

##### SPLITS #####
# Vertical split (left/right) with same cwd
bind v split-window -h -c "#{pane_current_path}"
# Horizontal split (top/bottom) with same cwd
bind s split-window -v -c "#{pane_current_path}"

##### WINDOW NAVIGATION #####
bind H previous-window
bind L next-window
bind w list-windows
bind x kill-pane

set -g allow-rename off           # prevent apps from renaming
set -g automatic-rename on        # but let tmux auto-name
set -g automatic-rename-format '#{b:pane_current_path}'

# Quickly switch to last active window: Prefix + a (since prefix is C-a)
bind a last-window

##### PANE NAVIGATION (VIM STYLE) #####
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

##### PANE RESIZING (OPTIONAL, NICE TO HAVE) #####
# Repeated presses resize in steps
bind -r -T prefix , resize-pane -L 10
bind -r -T prefix . resize-pane -R 10
bind -r -T prefix - resize-pane -D 5
bind -r -T prefix = resize-pane -U 5

##### COPY MODE (VI) #####
# Start selection with `v` in copy-mode-vi
bind-key -T copy-mode-vi v send-keys -X begin-selection
bind-key -T copy-mode-vi y send-keys -X copy-selection-and-cancel

#### PLUGINS ####
set -g @tpm_plugin_path '~/.config/tmux/plugins'

set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-sensible'
set -g @plugin 'tmux-plugins/tmux-yank'

# set -g @plugin 'catppuccin/tmux#v2.1.3' # not working; idk why
set -g @catppuccin_window_status_style "rounded"
set -ogq @catppuccin_window_text " #W"
set -ogq @catppuccin_window_current_text " #W"
run ~/.config/tmux/plugins/catppuccin/tmux/catppuccin.tmux

set -g status-right-length 100
set -g status-left-length 100
set -g status-left ""
set -g status-right "#{E:@catppuccin_status_application}"

run '~/.config/tmux/plugins/tpm/tpm'

